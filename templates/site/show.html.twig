
{% extends 'base.html.twig' %}

{% block title %}Hello SiteController!{% endblock %}

{% block body %}
<style>
.container{
    margin-top:50px;
}
#map{
    height:100%;
}
.details{
    height:25vh;
}
.haut{
    padding-bottom:50px;
}
</style>
<div class="container" onload="initialize()">
    <div class="row haut">
        <div class="col-4 offset-4"  >
            <h2>{{ article.name }}</h2>
            <img class="img-fluid img-thumbnail" src="{{ vich_uploader_asset(article, 'imageFile') }}" alt="">
        </div>
    </div>
    <div class="row details">
        
        <div class="col-6">
            <h3>Description</h3>
            <p>{{article.description}}</p>
        </div>
        <div class="col-6">
            <h3>Localisation</h3>
            <!-- MAP ARTICLE -->
            <div id="map"></div>
            <span>{{article.adress}}</span>
        </div>
    </div>


</div>

<!-- MAP ARTICLE -->
<div id="map"></div>


<script>
    var geocoder;
    var map;
    function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(-34.397, 150.644);
        var mapOptions = {
        zoom: 15,
        center: latlng,
        mapTypeControl: false
        }
        map = new google.maps.Map(document.getElementById('map'), mapOptions);
        codeAddress();
    }

    function codeAddress() {
        var address = "{{article.adress}}";
        geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == 'OK') {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
        } else {
            alert('Geocode was not successful for the following reason: ' + status);
        }
        });
    }

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAABTkTYBR9JM4Bzju4RsQ299xaLrLNZn8&callback=initialize"
    async defer></script>

{% endblock %}
